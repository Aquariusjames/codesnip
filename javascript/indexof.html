<!doctype html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>indexOf实现</title>
    <script type="text/javascript" charset="utf-8">
        String.prototype.indexOf = function(sub){
            var pos = 0, len = this.length, sublen = sub.length, i = 0;
            while(i < len){
                same = this.charAt(i) === sub.charAt(pos);
                i = same ? i + 1: i - pos + 1;
                pos = same ? pos + 1: 0;
                if (pos === sublen)
                    return i - sublen;
            }
            return -1;
        };
        function test(input, sub)
        {
            document.writeln('"' + input + '".indexOf("'+ sub + '")=' 
                + input.indexOf(sub) + '<br>');
        }
        test('hellhelloworld','hello');
        test('hello world','xxoo');
        test('hello', 'helloworld');
        test('hello world','hello');
        test('hhl','hl');
</script>
</head>
<body>
</body>
</html>

