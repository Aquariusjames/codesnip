### [信息安全基础](http://baike.baidu.com/view/17249.htm)

信息安全目标

1. 真实性：对信息的来源进行判断，能对伪造来源的信息予以鉴别。
1. 保密性：保证机密信息不被窃听，或窃听者不能了解信息的真实含义。
1. 完整性：保证数据的一致性，防止数据被非法用户篡改。
1. 可用性：保证合法用户对信息和资源的使用不会被不正当地拒绝。
1. 不可抵赖性：建立有效的责任机制，防止用户否认其行为，这一点在电子商务中是极其重要的。

常见攻击手段

1. 破坏信息的完整性
1. 拒绝服务
1. 窃听
1. 假冒
1. 旁路控制
1. 抵赖
1. 重放
1. 猜测预测
1. 拖库, 信息泄露

### 密码学基础 

1. HASH
    1. 用途：
        1. 防止信息被篡改 
        1. 保证信息完整性 
        1. 数据去重
    1. 常见算法：
        1. checksum: 就是简单的总和校验码，一般在通信中用于保证数据的完整性和准确性,比如tcp协议。
        1. crc32：32bit,性能好，碰撞率高，一般用于图片去重。
        1. md5: 128bit,一般用户密码加密，文件校验，对于密码加密已经不安全，因为已经找到了碰撞条件
        1. sha1: 基本同md5, 已经找到了碰撞条件, 但用于文件校验还是没问题的
        1. sha256: 相对安全，可以用于密码加密
        1. Bloom Filter: 多个hash函数组合进行去重，一般用于大数据量的去重，比如搜索引擎网页收录。
           如果它说一个项目不在一个集合里，那肯定不在，如果说在，那有很小的可能不在。
1. 随机数
    1. 用途：
        1. 防猜测预测
    1. 常用算法：
        1. 线性同余: 最常用的伪随机数生成算法，如果知道种子有可能被预测到。
        1. GUID: 全球唯一字符串，很难被猜测到。
1. 对称加密
    1. 介绍：加密和解密需要使用相同的密钥，有流加密和块加密之分，一般可以进行大数据量的加密。
    1. 用途：
        1. 防止信息泄露
        1. 防止信息拦截
    1. 常见算法：
        1. DES: 64bit密钥, 破解难度较低
        1. 3DES: 三重DES，128bit密钥，破解难度较高
        1. RC2: DES的建议替代算法, 密钥长度可变,1-128bit, 速度较快
        1. RC4: 强度高，速度快
        1. AES: 广泛使用的加密算法，已经成为美国加密标准。 
1. 非对称加密
    1. 介绍：加密和解密使用不同的密钥，一般只能加密很少量的数据，而且性能较差。
    1. 用途：
        1. 验证身份，数字签名，实现不可抵赖性
        1. 数据加密, 防止信息泄露和拦截
    1. 常见算法：
        1. RSA: 基于大数运算和数学原理，可以让加密和解密使用不同的密钥。

### 身份认证方案

**[HTTP基本认证](http://zh.wikipedia.org/wiki/HTTP%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81)**

1. 介绍：用户名追加一个冒号然后串接上口令，并将得出的结果字符串再用Base64算法编码。
1. 优点：
    1. 浏览器支持广泛。
1. 缺点：
    1. 不能防止信息泄露，base64只是编码，不是加密。
    1. 不能防窃听
    1. 不能防重放 
    1. 不能防拖库
1. 使用场景：
    1. 在可信网络环境中可使用基本认证。
    1. 使用HTTPS做传输层。

**[HMAC](http://www.cnblogs.com/songhan/archive/2012/07/29/2613898.html)**

1. 介绍：
    1. 用哈希算法，以一个密钥和一个消息为输入，生成一个消息摘要作为输出。
    1. 消息认证码是基于密钥和消息摘要【hash】所获得的一个值，可用于数据源发认证和完整性校验。
1. 原理：
    1. ![图](http://pic002.cnblogs.com/images/2012/427162/2012072911095143.png)
    1. client要给server发送message，先用key和message加起来，然后哈希得出一个MAC
    1. 然后用户把明文message和MAC发给server
    1. server知道key，用同样的算法得到MAC，看和client请求的MAC是否一致
    1. 如果MAC一致，说明message是拥有key的人发送的，而且message没有被篡改
1. 优点：
    1. 实现了身份认证，实现了不可抵赖性
    1. 保证了数据完整性，达到了防篡改的效果
    1. HMAC与一般的加密重要的区别在于它具有“瞬时”性，即认证只在当时有效
1. 缺点：
    1. message是明文，不能防窃听
    1. 不能防重放
1. 应用：
    1. 挑战/响应（Challenge/Response）身份认证,如SIP，HTTP
    1. Cookie签名

**[HTTP摘要认证(Digest access authentication, rfc2069)](http://pic002.cnblogs.com/images/2012/427162/2012072911095143.png)**

1. 介绍
    1. 它在密码发出前，先对其应用哈希函数，这相对于HTTP基本认证发送明文而言，更安全。
    1. ![图](http://upload.wikimedia.org/math/f/6/1/f61f1d5cfada956cb3f0ec17c0a6cbe0.png)
1. 原理 
    1. client请求认证页面, 不提供用户名和密码
    1. server返回401应答
        1. realm：认证域, 明文，
        1. nonce: 随机数, 明文，只使用一次
    1. client再次发起请求
        1. 对用户名、认证域(realm)以及密码的合并值计算 MD5 哈希值，结果称为 HA1。
        1. 对HTTP方法以及URI的摘要的合并值计算 MD5 哈希值，例如，"GET" 和 "/dir/index.html"，结果称为 HA2。
        1. 对 HA1、服务器密码随机数(nonce)、请求计数(nc,防止重放)、客户端密码随机数(cnonce)、 HA2 的合并值计算 MD5得到response 值以及cnonce。
    1. server收到应答，因为服务器拥有与客户端同样的信息，因此服务器可以进行同样的计算，以验证客户端提交的 response 值的正确性。
1. 优点
    1. 密码明文不需要传输，所以明文不会被泄露,这样server可以不存明文密码，而是只存HA1。
    1. 可以客户端随机数cnonce，够防止选择明文攻击(劫持到密文后猜测加密算法及明文)。
    1. nonce允许包含时间戳, 过期后就失效，防止重放攻击。
    1. 服务器也可以维护一个最近发出的nonce的列表以防止nonce重用。
    1. 防监听，防重放, 防抵赖，身份认证
1. 缺点
    1. RFC 2617 中的许多安全选项都是可选的, 某些时候会降级为RFC 2616。
    1. 容易受到中间人攻击, 摘要访问认证没有提供任何机制帮助客户端验证服务器的身份。
    1. 使用HTTPS加密同时使用这些弱明文协议解决了许多摘要访问认证试图要防止的许多威胁。
    1. 使用md5是使用到了md5的不可逆性，但md5现在有可以攻击的方式，如穷举攻击(密码比较简单时)，字典攻击，
    1. 如何面对冲突攻击(不同明文哈希后相同)（rfc2617）。
1. 其它说明
    1. 可以允许每一个nonce只使用一次，但这样就会迫使客户端在发送每个请求的时候重复认证过程
    1. nonce在生成后立刻过期是不行的，因为客户端将没有任何机会来使用这个nonce。 
    1. 客户端多次请求可以重用nonce,但得提供新的cnonce)。在后续的请求中，nc比前一次要大。


[https/tls](http://baike.baidu.com/link?url=anOyJqzJMkRs9vEAhaAJF24WcdwY_uBLNrAGjxlZw6ywkx8ppnpWFe31gaRNcBga) 

1. 介绍：它是一个安全传输协议，但也可以进行身份认证。
    1. 加密传输数据: 服务端和客户端之间的所有通讯，都是加密的。
    1. 用于身份验证: 保证服务器就是他声称的服务器。
    1. 维护数据的完整性，确保数据在传输过程中不被改变。
    1. RC4, X509
1. 握手机制-简化版
    1. client要访问一个server, 知道server的域名domain
    2. client向server发起请求
        2.1. ssl版本号
        2.2. 加密算法类型
        2.3. 随机数
    3. server给client返回应答
        3.1 ssl版本号
        3.2 加密算法类型
        3.3 随机数
        3.4 自己的证书(公钥)
        3.5 随机数签名。 
    4. client验证服务端返回的应答
        4.1 证书是否过期
        4.2 发型证书的CA是否可靠（会和本地的可信任CA列表对比）
        4.3 server的公钥能否解开server返回的随机数签名 # 确认server有该证书的私钥
        4.4 server的证书授权的域名是否是server的域名
    5. client随机产生一个用于对称加密密钥，然后用server的公钥加密，发给Server
    6. server用自己三私钥解密出对称加密密钥。
    7. 后续的通信都用对称加密密钥进行加解密。
1. 优点：
    1. 防窃听
    1. 防重放
    1. 防中间人攻击，
    1. 保证数据完整性性
1. 缺点
    1. 不能防止信息泄露，拖库，只是保证传输层安全
    1. 一般不能用于客户端身份验证，需要配合http基本认证
    1. 建立连接速度慢

oauth

1. 介绍：OAuth允许用户提供一个令牌，而不是用户名和密码来访问他们存放在特定服务提供者的数据。每一个令牌授权一个特定的网站（例如，视频编辑网站)在特定的时段（例如，接下来的2小时内）内访问特定的资源（例如仅仅是某一相册中的视频）。
1. 原理：
    1. 用户访问客户端的网站，想操作自己存放在服务提供方的资源。
    1. 客户端向服务提供方请求一个临时令牌。
    1. 服务提供方验证客户端的身份后，授予一个临时令牌。
    1. 客户端获得临时令牌后，将用户引导至服务提供方的授权页面请求用户授权。在这个过程中将临时令牌和客户端的回调连接发送给服务提供方。
    1. 用户在服务提供方的网页上输入用户名和密码，然后授权该客户端访问所请求的资源。
    1. 授权成功后，服务提供方引导用户返回客户端的网页。
    1. 客户端根据临时令牌从服务提供方那里获取访问令牌 。
    1. 服务提供方根据临时令牌和用户的授权情况授予客户端访问令牌。
    1. 客户端使用获取的访问令牌访问存放在服务提供方上的受保护的资源。

1. Secure Remote Password protocol
1. 双因素认证，动态口令

### 参考链接

1. [HTTPS的七个误解（译文）](http://www.ruanyifeng.com/blog/2011/02/seven_myths_about_https.html)
